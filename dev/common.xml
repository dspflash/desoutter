<?xml version="1.0" encoding="UTF-8"?><XI3uWnd navtype="tab" debug="0" Title="智联装配" icons="http://3ucs.com/biz/theme/delight-vtiger/vtiger/style.css">
	<DbDetails>
		<SubDriver>MySQL ODBC 3.51 Driver</SubDriver>
		<Host>localhost</Host>
		<database>desoutter</database>
		<sqlMode>NO_BACKSLASH_ESCAPES</sqlMode>
		<User>i3u</User>
		<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" xpointer="pass" href="config/db.xml"/>
		</DbDetails>
	<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="lan\general.xml"/>	
	<WndTaps>
	<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="product_vm.xml"/>
	<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="modellist_v.xml"/>
	<!--xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="psetlist_v.xml"/-->
	<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="station_vm.xml"/>
	<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="users_v.xml"/>
	<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="user_role_v.xml"/>
	<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="station_op.xml"></xi:include>
   <WndTap Name="NoSql" Text="NoSQL数据库"><Ctrls>
	<GroupBox Name="NoSql" Text="NoSQL数据库" cols="xs12 sm12 md12 lg12"><Ctrls>
		<GroupBox Name="ims" Text="即时消息" cols="xs12 sm12 md12 lg12"><Ctrls>
			<ListCtrl Name="NoSQLLst" PageSize="10" loadedclick="1" OnLoad="init" Size="450,150">
			<DbDetails>
				<DbDatabase>..\..\3UCS\\xdb\\immsg.conf</DbDatabase> 
				<!--DbDatabase>E:\vcsln\rs\ssdb-ssdb-server-windows\ssdb-server-win\Release\ssdb.conf</DbDatabase--> 
				<datatype>NoSQL</datatype> 
				<queryFormat>select * from immsg where sendto='7102' order by id desc</queryFormat>and x=1  
				</DbDetails>
			<operator refresh="1">
			<op text="download" mustselected="1"><assign name="topmost" expr="GetFile:%{DirList[0]},dir=E:\vcsln\3ucs\cppweb\examples\xbizfrm\xPlus\bin,localdir="/></op>
			</operator>
			</ListCtrl></Ctrls></GroupBox>
		<BR autoheight="1"/><GroupBox Name="uiot" Text="物联网" cols="xs12 sm12 md12 lg12"><Ctrls>
		<TextBox Name="topic_value" Size="300,20" Tooltip="value or cmd(such as acquire) for topic" Text="5"/>
		<TextBox name="mqtt_topic" Size="300,20" Tooltip="name of mqtt Topic" Text="devices/desoutter01/acqer_//ip"/>devices/PLC01/cpux238/46 devices/PLC01/sys/33
		<TextBox Name="cnts4read" Size="60,20" Tooltip="counts of records for read of NoSql" Text="1000"/>
		<DateTime Name="dtscore" Format="yyyy-MM-dd HH:mm" tooltip="score begin for mqtt topic,Valid when topic not empty" Size="150,20"/>
		<Button Name="mqtt_update" Clickneedconfirm="true" Size="100,20" Text="修改MQTT" tooltip="修改所选择的项的值">
			<OnClick><DbDetails>
			<DbDatabase>mqtt</DbDatabase> 
			<datatype>mqtt</datatype> 
			<queryFormat>set %{mqtt_topic}='%{topic_value}'</queryFormat> 
			</DbDetails><submit next="topic_value" namelist="DbDetails"/><submit next="IotNoSQLLst"/></OnClick></Button>
		<Button Name="mqtt_query" Size="100,20" Text="查询MQTT" tooltip="显示Topic的值列表">
			<OnClick><submit next="IotNoSQLLst"/></OnClick></Button>
		</Ctrls></GroupBox>		
		<BR autoheight="1"/><GroupBox Name="mqtt" Text="MQTT" cols="xs12 sm12 md12 lg12"><Ctrls>
		<TextBox Name="mqtt_recv" Size="100,20" Tooltip="value or cmd(such as acquire) for topic" Text="5"/>
		<TextBox name="mqtt_d4publish" Size="100,20" Tooltip="value for mqtt publish Topic" Text="123"/>
		<Button Name="mqtt_subscribe" Clickneedconfirm="true" Size="100,20" Text="MQTT_subscribe" tooltip="订阅">
			<OnClick><mqtt next="mqtt_recv" function="subscribe" expr="%{mqtt_topic}"/></OnClick></Button>
		<Button Name="mqtt_publish" Size="100,20" Text="MQTTpublish" tooltip="显示Topic的值列表">
			<OnClick><mqtt function="publish" expr="%{mqtt_d4publish}" topic="%{mqtt_topic}"/> </OnClick></Button>
		</Ctrls></GroupBox>		
		<BR autoheight="1"/><GroupBox cols="xs12 sm12 md12 lg12"><Ctrls>
			<ListCtrl Name="IotNoSQLLst" PageSize="10" loadedclick="1" OnLoad="init" Size="500,300">
			<DbDetails>
				<DbDatabase>..\..\3UCS\\xdb\\iot.conf</DbDatabase>
				<!--DbDatabase>E:\vcsln\rs\ssdb-ssdb-server-windows\ssdb-server-win\Release\ssdb.conf</DbDatabase-->  score 2021-07-11 21:06 
				<datatype>NoSQL</datatype> id,topic,data6 as mods
				<queryFormat>select * from iot where topic='%{mqtt_topic}' limit %{cnts4read} score %{dtscore}</queryFormat> Proc4MQTT
				</DbDetails>where topic='%{mqtt_topic}' limit 'now_ms(),now(),',1000
			<operator refresh="1">topic='devices/desoutter01/sys/61/detail' and key='%{YU5A4A554012100410003818643410}'
			<op text="search"><assign name="mqtt_topic" expr="%{IotNoSQLLst[topic]}"/></op>
			</operator>
			</ListCtrl></Ctrls></GroupBox> 
		</Ctrls></GroupBox> 
		</Ctrls>
    </WndTap>
	</WndTaps>
</XI3uWnd>